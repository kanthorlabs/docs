"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6278],{9716:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>a});var c=s(4848),t=s(8453);const r={title:"Subject",sidebar_label:"Subject",sidebar_position:2},i=void 0,d={id:"concepts/subject",title:"Subject",description:"A Subject in the KanthorQ system is a hierarchical entity that categorizes events. Understanding how subjects are structured and used in KanthorQ is essential for leveraging them effectively in your workflows.",source:"@site/docs/003-concepts/002-subject.md",sourceDirName:"003-concepts",slug:"/concepts/subject",permalink:"/kanthorq/docs/concepts/subject",draft:!1,unlisted:!1,editUrl:"https://github.com/kanthorlabs/kanthorq/tree/main/packages/create-docusaurus/templates/shared/docs/003-concepts/002-subject.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Subject",sidebar_label:"Subject",sidebar_position:2},sidebar:"default",previous:{title:"Overview",permalink:"/kanthorq/docs/concepts/overview"},next:{title:"Publisher",permalink:"/kanthorq/docs/concepts/publisher"}},o={},a=[{value:"Recommendation subject design decisions",id:"recommendation-subject-design-decisions",level:2},{value:"Define your subject",id:"define-your-subject",level:2},{value:"Matching your subject",id:"matching-your-subject",level:2},{value:"Final Thoughts",id:"final-thoughts",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.p,{children:"A Subject in the KanthorQ system is a hierarchical entity that categorizes events. Understanding how subjects are structured and used in KanthorQ is essential for leveraging them effectively in your workflows."}),"\n",(0,c.jsx)(n.h2,{id:"recommendation-subject-design-decisions",children:"Recommendation subject design decisions"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsx)(n.p,{children:"A Subject in KanthorQ follows a left-to-right naming hierarchy, moving from general to specific. Here are examples illustrating this hierarchy:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"ecommerce.order.created"})," \u2013 Simple name definition."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"tier_standard.order.created"})," \u2013 Tier-specific subject."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"internal.testing.order.created"})," \u2013 Naming for internal testing environments."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Environment-specific"}),": Separate operational environments, such as ecommerce.",(0,c.jsx)(n.code,{children:"order.created.prod"})," and ",(0,c.jsx)(n.code,{children:"ecommerce.order.created.uat"}),", to facilitate testing or debugging."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Versioned subjects"}),": Use versions like ",(0,c.jsx)(n.code,{children:"ecommerce.order.created.v1"})," and ",(0,c.jsx)(n.code,{children:"ecommerce.order.created.v2"})," for tracking updates over time."]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Abstract Layer"}),": Subjects should represent business logic, not technical details."]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.strong,{children:"Longevity"}),": Subjects should be designed to last throughout the business's lifecycle. If changes are required, consider creating a new version or an entirely new subject to replace outdated ones."]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"define-your-subject",children:"Define your subject"}),"\n",(0,c.jsxs)(n.p,{children:["KanthorQ's subject definition aligns with ",(0,c.jsx)(n.a,{href:"https://docs.nats.io/nats-concepts/subjects",children:"NATS Subject-Based Messaging"}),", supporting an interest-based messaging system. Here are the rules for defining subjects:"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["A ",(0,c.jsx)(n.code,{children:"subject"})," is a case-sensitive string composed of multiple tokens separated by . (dot)."]}),"\n",(0,c.jsxs)(n.li,{children:["Each ",(0,c.jsx)(n.code,{children:"token"})," is a string, allowing any character except ",(0,c.jsx)(n.code,{children:"."}),", ",(0,c.jsx)(n.code,{children:"*"}),", and ",(0,c.jsx)(n.code,{children:">"}),"."]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["There are some recommendations from the section ",(0,c.jsx)(n.a,{href:"https://docs.nats.io/nats-concepts/subjects#characters-allowed-and-recommended-for-subject-names",children:"Characters allowed and recommended for subject names"})," I would recommend when you want to design your subject"]}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Allowed characters"}),": Any Unicode character except ",(0,c.jsx)(n.code,{children:"null"}),", ",(0,c.jsx)(n.code,{children:"space"}),", ",(0,c.jsx)(n.code,{children:"."}),", ",(0,c.jsx)(n.code,{children:"*"})," and ",(0,c.jsx)(n.code,{children:">"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Recommended characters"}),": (",(0,c.jsx)(n.code,{children:"a"})," - ",(0,c.jsx)(n.code,{children:"z"}),"), (",(0,c.jsx)(n.code,{children:"A"})," - ",(0,c.jsx)(n.code,{children:"Z"}),"), (",(0,c.jsx)(n.code,{children:"0"})," - ",(0,c.jsx)(n.code,{children:"9"}),"), ",(0,c.jsx)(n.code,{children:"-"})," and ",(0,c.jsx)(n.code,{children:"_"})," (names are case sensitive, and cannot contain whitespace)."]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Naming Conventions"}),": If you want to delimit words, use either CamelCase as in ",(0,c.jsx)(n.code,{children:"MyServiceOrderCreate"})," or - and ",(0,c.jsx)(n.code,{children:"_"})," as in ",(0,c.jsx)(n.code,{children:"my-service-order-create"})]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Special characters"}),": The period ",(0,c.jsx)(n.code,{children:"."})," (which is used to separate the tokens in the subject) and ",(0,c.jsx)(n.code,{children:"*"})," and also ",(0,c.jsx)(n.code,{children:">"})," (the ",(0,c.jsx)(n.code,{children:"*"})," and ",(0,c.jsx)(n.code,{children:">"})," are used as wildcards) are reserved and cannot be used."]}),"\n"]}),"\n",(0,c.jsx)(n.h2,{id:"matching-your-subject",children:"Matching your subject"}),"\n",(0,c.jsx)(n.p,{children:"In KanthorQ, you can match subjects to patterns using three methods:"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.strong,{children:"Exact Match"}),": Matches subjects with exact case-sensitive text."]}),"\n",(0,c.jsxs)(n.li,{children:["Single-Token Wildcard (",(0,c.jsx)(n.code,{children:"*"}),"): Matches exactly one token in the subject. For example, ",(0,c.jsx)(n.code,{children:"order.*"})," matches ",(0,c.jsx)(n.code,{children:"order.created"})," or ",(0,c.jsx)(n.code,{children:"order.updated"})," but does not match ",(0,c.jsx)(n.code,{children:"order"}),", ",(0,c.jsx)(n.code,{children:"order.created.v1"}),", or ",(0,c.jsx)(n.code,{children:"order.updated.v1"}),"."]}),"\n",(0,c.jsxs)(n.li,{children:["Multi-Token Wildcard (",(0,c.jsx)(n.code,{children:">"}),"): Using ",(0,c.jsx)(n.code,{children:">"})," wildcard to match multiple tokens in a subject. For example, ",(0,c.jsx)(n.code,{children:"order.>"})," matches ",(0,c.jsx)(n.code,{children:"order.created"}),", ",(0,c.jsx)(n.code,{children:"order.updated"}),", ",(0,c.jsx)(n.code,{children:"order.created.v1"}),", and ",(0,c.jsx)(n.code,{children:"order.updated.v1"})," but does not match ",(0,c.jsx)(n.code,{children:"order"}),"."]}),"\n"]}),"\n",(0,c.jsxs)(n.p,{children:["For more pattern matching examples, refer to the ",(0,c.jsx)(n.a,{href:"https://github.com/kanthorlabs/kanthorq/blob/main/core/utils_test.go",children:"TestMatchSubject"})," test."]}),"\n",(0,c.jsx)(n.h2,{id:"final-thoughts",children:"Final Thoughts"}),"\n",(0,c.jsx)(n.p,{children:"Nothing, go test and find out some gochas ;D"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>d});var c=s(6540);const t={},r=c.createContext(t);function i(e){const n=c.useContext(r);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),c.createElement(r.Provider,{value:n},e.children)}}}]);